(function(e,t,i){"use strict";if(typeof module!=="undefined"&&module.exports){module.exports=i(t,e)}else if(typeof define==="function"&&define.amd){define("factory",function(){return i(t,e)})}else{e[t]=i(t,e)}})(window,"detectZoom",function(){var e=function(){return window.devicePixelRatio||1};var t=function(){return{zoom:1,devicePxPerCssPx:1}};var i=function(){var t=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100;return{zoom:t,devicePxPerCssPx:t*e()}};var r=function(){var t=Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100;return{zoom:t,devicePxPerCssPx:t*e()}};var n=function(){var t=Math.abs(window.orientation)==90?screen.height:screen.width;var i=t/window.innerWidth;return{zoom:i,devicePxPerCssPx:i*e()}};var s=function(){var t=function(e){return e.replace(/;/g," !important;")};var i=document.createElement("div");i.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0";i.setAttribute("style",t("font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;"));var r=document.createElement("div");r.setAttribute("style",t("width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;"));r.appendChild(i);document.body.appendChild(r);var n=1e3/i.clientHeight;n=Math.round(n*100)/100;document.body.removeChild(r);return{zoom:n,devicePxPerCssPx:n*e()}};var a=function(){var e=u("min--moz-device-pixel-ratio","",0,10,20,1e-4);e=Math.round(e*100)/100;return{zoom:e,devicePxPerCssPx:e}};var o=function(){return{zoom:a().zoom,devicePxPerCssPx:e()}};var l=function(){var t=window.top.outerWidth/window.top.innerWidth;t=Math.round(t*100)/100;return{zoom:t,devicePxPerCssPx:t*e()}};var u=function(e,t,i,r,n,s){var a;var o,l,u;if(window.matchMedia){a=window.matchMedia}else{o=document.getElementsByTagName("head")[0];l=document.createElement("style");o.appendChild(l);u=document.createElement("div");u.className="mediaQueryBinarySearch";u.style.display="none";document.body.appendChild(u);a=function(e){l.sheet.insertRule("@media "+e+"{.mediaQueryBinarySearch "+"{text-decoration: underline} }",0);var t=getComputedStyle(u,null).textDecoration=="underline";l.sheet.deleteRule(0);return{matches:t}}}var c=f(i,r,n);if(u){o.removeChild(l);document.body.removeChild(u)}return c;function f(i,r,n){var o=(i+r)/2;if(n<=0||r-i<s){return o}var l="("+e+":"+o+t+")";if(a(l).matches){return f(o,r,n-1)}else{return f(i,o,n-1)}}};var c=function(){var e=t;if(!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI)){e=i}else if(window.navigator.msMaxTouchPoints){e=r}else if("orientation"in window&&typeof document.body.style.webkitMarquee==="string"){e=n}else if(typeof document.body.style.webkitMarquee==="string"){e=s}else if(navigator.userAgent.indexOf("Opera")>=0){e=l}else if(window.devicePixelRatio){e=o}else if(a().zoom>.001){e=a}return e}();return{zoom:function(){return c().zoom},device:function(){return c().devicePxPerCssPx}}});var wpcom_img_zoomer={clientHintSupport:{gravatar:false,files:false,photon:false,mshots:false,staticAssets:false,latex:false,imgpress:false},useHints:false,zoomed:false,timer:null,interval:1e3,imgNeedsSizeAtts:function(e){if(e.getAttribute("width")!==null||e.getAttribute("height")!==null)return false;if(e.width<e.naturalWidth||e.height<e.naturalHeight)return false;return true},hintsFor:function(e){if(this.useHints===false){return false}if(this.hints()===false){return false}if(typeof this.clientHintSupport[e]==="undefined"){return false}if(this.clientHintSupport[e]===true){return true}return false},hints:function(){try{var e=window.navigator.userAgent.match(/\sChrome\/([0-9]+)\.[.0-9]+\s/);if(e!==null){var t=parseInt(e[1],10);if(isNaN(t)===false&&t>=46){return true}}}catch(e){return false}return false},init:function(){var e=this;try{e.zoomImages();e.timer=setInterval(function(){e.zoomImages()},e.interval)}catch(e){}},stop:function(){if(this.timer)clearInterval(this.timer)},getScale:function(){var e=detectZoom.device();if(e<=1)e=1;else if(e<=1.5)e=1.5;else if(e<=2)e=2;else if(e<=3)e=3;else if(e<=4)e=4;else e=5;return e},shouldZoom:function(e){var t=this;if("innerWidth"in window&&!window.innerWidth)return false;if(e==1&&t.zoomed==false)return false;return true},zoomImages:function(){var e=this;var t=e.getScale();if(!e.shouldZoom(t)){return}e.zoomed=true;var i=document.getElementsByTagName("img");for(var r=0;r<i.length;r++){if("complete"in i[r]&&!i[r].complete)continue;if(i[r].hasAttribute("srcset")){continue}var n=i[r].getAttribute("scale");if(n==t||n=="0")continue;var s=i[r].getAttribute("scale-fail");if(s&&s<=t)continue;if(!(i[r].width&&i[r].height))continue;if(!n&&i[r].getAttribute("data-lazy-src")&&i[r].getAttribute("data-lazy-src")!==i[r].getAttribute("src"))continue;if(e.scaleImage(i[r],t)){i[r].setAttribute("scale",t)}else{i[r].setAttribute("scale","0")}}},scaleImage:function(e,t){var i=this;var r=e.src;var n=false;var s=false;var a=false;if(e.parentNode.className.match(/slideshow-slide/))return false;if(e.parentNode.className.match(/coblocks-lightbox__image/))return false;if(e.src.match(/^https?:\/\/([^\/]*\.)?gravatar\.com\/.+[?&](s|size)=/)){if(this.hintsFor("gravatar")===true){return false}r=e.src.replace(/([?&](s|size)=)(\d+)/,function(r,n,s,a){var o="originals",l=e.getAttribute(o);if(l===null){l=a;e.setAttribute(o,l);if(i.imgNeedsSizeAtts(e)){e.width=e.width;e.height=e.height}}var u=e.clientWidth;var c=Math.ceil(e.clientWidth*t);c=Math.max(c,l);c=Math.min(c,512);return n+c})}else if(e.src.match(/^https?:\/\/([^\/]+\.)*(wordpress|wp)\.com\/mshots\/.+[?&]w=\d+/)){if(this.hintsFor("mshots")===true){return false}r=e.src.replace(/([?&]w=)(\d+)/,function(r,n,s){var a="originalw",o=e.getAttribute(a);if(o===null){o=s;e.setAttribute(a,o);if(i.imgNeedsSizeAtts(e)){e.width=e.width;e.height=e.height}}var l=e.clientWidth;var u=Math.ceil(l*t);u=Math.max(u,o);if(t>e.getAttribute("scale")&&u<=e.naturalWidth)u=s;if(s!=u)return n+u;return r});r=r.replace(/([?&]h=)(\d+)/,function(i,n,s){if(r==e.src){return i}var a="originalh",o=e.getAttribute(a);if(o===null){o=s;e.setAttribute(a,o)}var l=e.clientHeight;var u=Math.ceil(l*t);u=Math.max(u,o);if(t>e.getAttribute("scale")&&u<=e.naturalHeight)u=s;if(s!=u)return n+u;return i})}else if(e.src.match(/^https?:\/\/([^\/.]+\.)*(wp|wordpress)\.com\/imgpress\?(.+)/)){if(this.hintsFor("imgpress")===true){return false}var o=["zoom","url","h","w","fit","filter","brightness","contrast","colorize","smooth","unsharpmask"];var l=RegExp.$3.split("&");for(var u in l){u=l[u].split("=")[0];if(o.indexOf(u)==-1){return false}}e.width=e.width;e.height=e.height;if(t==1)r=e.src.replace(/\?(zoom=[^&]+&)?/,"?");else r=e.src.replace(/\?(zoom=[^&]+&)?/,"?zoom="+t+"&")}else if((n=e.src.match(/^https?:\/\/([^\/]+)\.files\.wordpress\.com\/.+[?&][wh]=/))||(s=e.src.match(/^https?:\/\/([^\/.]+\.)*(wp|wordpress)\.com\/latex\.php\?(latex|zoom)=(.+)/))||(a=e.src.match(/^https?:\/\/i[\d]{1}\.wp\.com\/(.+)/))){if(false!==n&&this.hintsFor("files")===true){return false}if(false!==s&&this.hintsFor("latex")===true){return false}if(false!==a&&this.hintsFor("photon")===true){return false}e.width=e.width;e.height=e.height;if(t==1){r=e.src.replace(/\?(zoom=[^&]+&)?/,"?")}else{r=e.src;var c=r.match(/([?&]w=)(\d+)/);if(c!==null&&c[2]){r=r.replace(c[0],c[1]+e.width)}c=r.match(/([?&]h=)(\d+)/);if(c!==null&&c[2]){r=r.replace(c[0],c[1]+e.height)}var f="&zoom=2";if(!r.match(/\?/)){f="?zoom=2"}e.setAttribute("srcset",r+f+" "+t+"x")}}else if(e.src.match(/^https?:\/\/[^\/]+\/.*[-@]([12])x\.(gif|jpeg|jpg|png)(\?|$)/)){if(this.hintsFor("staticAssets")===true){return false}e.width=e.width;e.height=e.height;var h=RegExp.$1,d=h;if(t<=1)d=1;else d=2;if(h!=d)r=e.src.replace(/([-@])[12]x\.(gif|jpeg|jpg|png)(\?|$)/,"$1"+d+"x.$2$3")}else{return false}if(r!=e.src){var m,v=e.getAttribute("src-orig");if(!v){v=e.src;e.setAttribute("src-orig",v)}m=e.src;e.onerror=function(){e.src=m;if(e.getAttribute("scale-fail")<t)e.setAttribute("scale-fail",t);e.onerror=null};e.src=r}return true}};wpcom_img_zoomer.init();